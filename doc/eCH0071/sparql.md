# eCH0071 sample SPARQL queries

If you need help with additional queries please open an issue in this Github repository.

DEPRECATED, these queries will soon stop working as the final publication is prepared to be on http://ld.admin.ch/

* [All (not versioned) municipality IDs in Switzerland](http://classifications.data.admin.ch/sparql/#query=PREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E%0A%0ASELECT+*%0A%0AWHERE+%7B%0A++%3Fs+a+gont%3AMunicipality+%3B%0A++++gont%3Aid+%3Fmunid+.%0A%7D&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=http%3A%2F%2Fclassifications.data.admin.ch%2Fquery%2F&requestMethod=POST&tabTitle=Query&outputFormat=table)
* [All versioned municipalities](http://classifications.data.admin.ch/sparql/#query=PREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E%0A%0ASELECT+*%0A%0AWHERE+%7B%0A++%3Fs+a+gont%3AMunicipalityVersion+%3B%0A++++gont%3Aid+%3Fmunid+.%0A%7D&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=http%3A%2F%2Fdata.admin.ch%2Fquery%2F&requestMethod=POST&tabTitle=Query&outputFormat=table)
* [Versioned municipalities that are still active](http://classifications.data.admin.ch/sparql/#query=PREFIX+rdfs%3A+++%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E+%0A%0ASELECT+*+%0AFROM+%3Chttps%3A%2F%2Flinked.opendata.swiss%2Fgraph%2FeCH-0071%3E%0AWHERE+%7B%0A++%3Fmunicipalityversion+a+gont%3AMunicipalityVersion+%3B%0A++++gont%3Aid+%3Fmunhistid+%3B%0A++++gont%3Amunicipality+%3Fmunicipality+%3B%0A++++gont%3AlongName+%3Fmunname+.%0A++++MINUS+%7B+%3Fmunicipalityversion+gont%3AabolitionEvent+%3FabolitionEvent+.+%7D%0A++%0A++%3Fmunicipality+a+gont%3APoliticalMunicipality+%3B%0A++++gont%3Aid+%3Fmunid+.%0A++%0A%7D+ORDER+BY+%3Fmunid&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=http%3A%2F%2Fclassifications.data.admin.ch%2Fquery%2F&requestMethod=POST&tabTitle=Query&headers=%7B%7D&outputFormat=table)
* [Political municipalities that are still active](http://classifications.data.admin.ch/sparql/#query=PREFIX+rdfs%3A+++%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E+%0A%0ASELECT+*+%0AFROM+%3Chttps%3A%2F%2Flinked.opendata.swiss%2Fgraph%2FeCH-0071%3E%0AWHERE+%7B%0A++%3Fmunicipalityversion+a+gont%3AMunicipalityVersion+%3B%0A++++gont%3Aid+%3Fmunhistid+%3B%0A++++gont%3Amunicipality+%3Fmunicipality+%3B%0A++++gont%3AlongName+%3Fmunname+.%0A++++MINUS+%7B+%3Fmunicipalityversion+gont%3AabolitionEvent+%3FabolitionEvent+.+%7D%0A++%0A++%3Fmunicipality+a+gont%3APoliticalMunicipality+%3B%0A++++gont%3Aid+%3Fmunid+.%0A++%0A%7D+ORDER+BY+%3Fmunid&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=http%3A%2F%2Fclassifications.data.admin.ch%2Fquery%2F&requestMethod=POST&tabTitle=Query&headers=%7B%7D&outputFormat=table)
* [Political municipalities that are still active, including admission date](http://classifications.data.admin.ch/sparql/#query=PREFIX+rdfs%3A+++%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E+%0A%0ASELECT+*+%0AFROM+%3Chttps%3A%2F%2Flinked.opendata.swiss%2Fgraph%2FeCH-0071%3E%0AWHERE+%7B%0A++%3Fmunicipalityversion+a+gont%3AMunicipalityVersion+%3B%0A++++gont%3Aid+%3Fmunhistid+%3B%0A++++gont%3Amunicipality+%3Fmunicipality+%3B%0A++++gont%3AlongName+%3Fmunname+%3B%0A++++gont%3AadmissionEvent+%3FadmissionEvent+.%0A++MINUS+%7B+%3Fmunicipalityversion+gont%3AabolitionEvent+%3FabolitionEvent+.+%7D%0A++%0A++%3Fmunicipality+a+gont%3APoliticalMunicipality+%3B%0A++++gont%3Aid+%3Fmunid+.%0A++%0A++%3FadmissionEvent+gont%3Adate+%3FadmissionDate+.%0A++%0A%7D+ORDER+BY+%3Fmunid&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=http%3A%2F%2Fdata.admin.ch%2Fquery%2F&requestMethod=POST&tabTitle=Query&headers=%7B%7D&outputFormat=table)
* [All events on 01.01.2015](http://classifications.data.admin.ch/sparql/#query=PREFIX+rdfs%3A+++%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E+%0A%0ASELECT+*+%0AFROM+%3Chttps%3A%2F%2Flinked.opendata.swiss%2Fgraph%2FeCH-0071%3E%0AWHERE+%7B%0A++%0A++%3Fmunicipalityversion+a+gont%3AMunicipalityChangeEvent+%3B%0A++++gont%3Adate+'2015-01-01'%5E%5Exsd%3Adate+%3B%0A++++gont%3Aid+%3Fmunid+.%0A++%0A%7D+ORDER+BY+%3Fmunid&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=http%3A%2F%2Fclassifications.data.admin.ch%2Fquery%2F&requestMethod=POST&tabTitle=Query&headers=%7B%7D&outputFormat=table)
* [Details of all events on 01.01.2015](http://classifications.data.admin.ch/sparql/#query=PREFIX+rdfs%3A+++%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E+%0APREFIX+skos%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2004%2F02%2Fskos%2Fcore%23%3E%0A%0ASELECT+%3Feventid+%3FabolitionName+%3FadmissionName+%3Flabel%0A%0AWHERE+%7B%0A++%0A++%3Fevent+a+gont%3AMunicipalityChangeEvent+%3B%0A++++gont%3Adate+'2015-01-01'%5E%5Exsd%3Adate+%3B%0A++++gont%3Aid+%3Feventid+.%0A++%0A++%7B%0A++++%3Fmunabo+a+gont%3AMunicipalityVersion+%3B%0A++++++gont%3AlongName+%3FabolitionName+%3B%0A++++++gont%3AabolitionMode+%3Fabmode+%3B%0A++++++gont%3AabolitionEvent+%3Fevent+.%0A++++++++%0A++++%3Fabmode+skos%3AprefLabel+%3Flabel+.%0A++++FILTER+langMatches(+lang(%3Flabel)%2C+%22de%22+)%0A++++%0A++%7D+UNION%0A++%7B%0A++++%3Fmunadmis+a+gont%3AMunicipalityVersion+%3B%0A++++++gont%3AlongName+%3FadmissionName+%3B%0A++++++gont%3AadmissionMode+%3Fadmode+%3B%0A++++++gont%3AadmissionEvent+%3Fevent+.%0A++++%0A++++%3Fadmode+skos%3AprefLabel+%3Flabel+.%0A++++FILTER+langMatches(+lang(%3Flabel)%2C+%22de%22+)%0A++%7D%0A++%0A%7D+ORDER+BY+%3Feventid&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=http%3A%2F%2Fclassifications.data.admin.ch%2Fquery%2F&requestMethod=POST&tabTitle=Query&headers=%7B%7D&outputFormat=table)
* [How many municipalities in Switzerland changed canton?](http://classifications.data.admin.ch/sparql/#query=PREFIX+rdf%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%3E%0APREFIX+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E%0A%0ASELECT+%3FmunName+%3FcantonabolitionName+%3FcantonadmissionName+%3Fdate+WHERE+%7B+GRAPH+%3Chttps%3A%2F%2Flinked.opendata.swiss%2Fgraph%2FeCH-0071%3E+%7B%0A%0A++%3Fmunuriadmission+a+gont%3AMunicipalityVersion+%3B%0A++++++++++gont%3AadmissionEvent+%3Fmuneventuri+%3B%0A++++++++++gont%3Acanton+%3Fcanton+%3B%0A++++++++++gont%3AadmissionMode+%3Chttp%3A%2F%2Fclassifications.data.admin.ch%2Fcode%2Fech0071%2F24%3E+.%0A++MINUS+%7B%0A+++++%3Fmunuriabolition+a+gont%3AMunicipalityVersion+%3B%0A++++++++++gont%3AabolitionEvent+%3Fmuneventuri+%3B%0A++++++++++gont%3Acanton+%3Fcanton+%3B%0A++++++++++gont%3AabolitionMode+%3Chttp%3A%2F%2Fclassifications.data.admin.ch%2Fcode%2Fech0071%2F24%3E+.%0A++%7D%0A++%0A++%3Fmunuriabolition+a+gont%3AMunicipalityVersion+%3B%0A++++++++++gont%3AabolitionEvent+%3Fmuneventuri+%3B%0A++++++++++gont%3Acanton+%3Fcantonabolitionuri+.%0A+++%0A++%3Fmunuriadmission+a+gont%3AMunicipalityVersion+%3B%0A++++++++++gont%3AadmissionEvent+%3Fmuneventuri+%3B%0A++++++++++gont%3AlongName+%3FmunName+%3B%0A++++++++++gont%3Acanton+%3Fcantonadmissionuri+.%0A++%0A++%3Fcantonabolitionuri+gont%3AlongName+%3FcantonabolitionName+.%0A++%3Fcantonadmissionuri+gont%3AlongName+%3FcantonadmissionName+.%0A++%3Fmuneventuri+gont%3Adate+%3Fdate+.%0A++%0A%7D%7D+ORDER+BY+%3Fmuneventuri+&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=http%3A%2F%2Fclassifications.data.admin.ch%2Fquery%2F&requestMethod=POST&tabTitle=Query+3&headers=%7B%7D&outputFormat=table)
* [Federated Query: Get shapes of municipalities that stopped existing 2016](https://ld.geo.admin.ch/sparql/#query=PREFIX+rdf%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%3E%0APREFIX+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E+%0APREFIX+dct%3A+%3Chttp%3A%2F%2Fpurl.org%2Fdc%2Fterms%2F%3E%0APREFIX+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0APREFIX+schema%3A+%3Chttp%3A%2F%2Fschema.org%2F%3E%0A%0A%23%0A%23+This+query+gets+municipality+change+events+from+BFS+%22Historisiertes+Gemeindeverzeichnis%22%0A%23+It+extracts+municipalities+that+do+not+exist+anymore+in+this+particular+shape+after+2016%0A%23+Note+that+this+query+returns+zero+for+years+before+or+after+that%2C+due+to+the+lack+of%0A%23+shapes+for+older+versions.%0A%23%0A%0ASELECT+*+WHERE+%7B%0A++SERVICE+%3Chttp%3A%2F%2Fdata.admin.ch%2Fquery%3E+%7B+GRAPH+%3Chttps%3A%2F%2Flinked.opendata.swiss%2Fgraph%2FeCH-0071%3E+%7B%0A++++%23+Get+all+events+from+BFS%0A++++%3Fevent+a+gont%3AMunicipalityChangeEvent+%3B%0A++++++gont%3Adate+%3Fdate+%3B%0A++++++gont%3Aid+%3Feventid+.%0A++%0A++++%23+Get+the+URIs+of+the+involved+municipalities+++%0A++++%3Fmunabo+a+gont%3AMunicipalityVersion+%3B%0A++++++%23gont%3AlongName+%3FabolitionName+%3B%0A++++++gont%3Amunicipality+%3Fmunuri+%3B%0A++++++%23+only+%22Aufhebung+Gemeinde%2FBezirk%22%0A++++++gont%3AabolitionMode+%3Chttp%3A%2F%2Fclassifications.data.admin.ch%2Fcode%2Fech0071%2F29%3E+%3B%0A++++++gont%3AabolitionEvent+%3Fevent+.%0A++%7D%7D%0A++%23+Filter+to+changes+in+one+year%2C+only+works+for+2016+due+to+the+lack+of+older+shapes%0A++%23+If+you+change+that+you+will+get+zero+results.%0A++FILTER+(+%3Fdate+%3E%3D+%222016-01-01%22%5E%5Exsd%3Adate+%26%26+%3Fdate+%3C%3D+%222016-12-31%22%5E%5Exsd%3Adate+)%0A++%0A++%23+join+with+the+data+from+BFS%0A++%3Fshapeuri+a+%3Chttp%3A%2F%2Fwww.geonames.org%2Fontology%23A.ADM3%3E+%3B%0A++++dct%3AhasVersion+%3Fversion16+%3B%0A++++rdfs%3AseeAlso+%3Fmunuri+.%0A+%0A++%3Fversion16+schema%3AvalidUntil+'2016-12-31'%5E%5Exsd%3Adate+.%0A++%0A++%23+get+geometry+URI+from+2016%0A++%3Fversion16+geo%3AhasGeometry+%3FGeometry+%3B%0A+++++++++++++schema%3Aname+%3FCoordsLabel+.%0A++%0A++%3FGeometry+geo%3AasWKT+%3FCoords++.%0A++%0A%7D&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fld.geo.admin.ch%2Fquery&requestMethod=POST&tabTitle=Query&headers=%7B%7D&outputFormat=leaflet)
* [Federated query: Show all municpality changes in 2016](https://ld.geo.admin.ch/sparql/#query=PREFIX+rdf%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%3E%0APREFIX+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX+gont%3A+%3Chttps%3A%2F%2Fgont.ch%2F%3E+%0APREFIX+dct%3A+%3Chttp%3A%2F%2Fpurl.org%2Fdc%2Fterms%2F%3E%0APREFIX+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0APREFIX+skos%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2004%2F02%2Fskos%2Fcore%23%3E%0A%0A%23%0A%23+This+query+gets+municipality+change+events+from+BFS+%22Historisiertes+Gemeindeverzeichnis%22%0A%23+It+extracts+and+explains+what+happened+if+you+click+on+one+of+the+labels.%0A%23+Note+that+this+query+returns+zero+for+years+before+or+after+that%2C+due+to+the+lack+of%0A%23+shapes+for+older+versions.%0A%23%0A%0ASELECT+*+WHERE+%7B%0A++SERVICE+%3Chttp%3A%2F%2Fdata.admin.ch%2Fquery%3E+%7B+GRAPH+%3Chttps%3A%2F%2Flinked.opendata.swiss%2Fgraph%2FeCH-0071%3E+%7B%0A++++%3Fevent+a+gont%3AMunicipalityChangeEvent+%3B%0A++++++gont%3Adate+%3Fdate+%3B%0A++++++gont%3Aid+%3Feventid+.%0A++%0A++++%3Fmunabo+a+gont%3AMunicipalityVersion+%3B%0A++++++gont%3AlongName+%3FabolitionName+%3B%0A++++++gont%3Amunicipality+%3Fmunuri+%3B%0A++++++gont%3AabolitionMode+%3Fabmode+%3B%0A++++++gont%3AabolitionEvent+%3Fevent+.%0A++++++%3Fabmode+skos%3AprefLabel+%3FabolitionmodeName+.%0A++++%7D%7D%0A++FILTER+(+%3Fdate+%3E%3D+%222016-01-01%22%5E%5Exsd%3Adate+%26%26+%3Fdate+%3C%3D+%222016-12-31%22%5E%5Exsd%3Adate+)%0A++%0A++%3Fshapeuri+a+%3Chttp%3A%2F%2Fwww.geonames.org%2Fontology%23A.ADM3%3E+%3B%0A++++dct%3AhasVersion+%3Fversion16+%3B%0A++++rdfs%3AseeAlso+%3Fmunuri+.%0A++%0A++%3Fversion16+geo%3AhasGeometry+%3FGeometry+.%0A++%3FGeometry+geo%3AasWKT+%3FCoords++.%0A++%0A++BIND+(CONCAT('Gemeinde%3A+%3Cb%3E'%2C+%3FabolitionName%2C+'%3C%2Fb%3E%3Cbr%3EEvent%3A+'%2C+%3FabolitionmodeName)+AS+%3FCoordsLabel)%0A++%0A%7D&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fld.geo.admin.ch%2Fquery&requestMethod=POST&tabTitle=Query&headers=%7B%7D&outputFormat=leaflet)
